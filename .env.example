# ===========================================
# Tarasa Historic Extractor - Environment Variables
# ===========================================
# Copy this file to .env and fill in your values
# Generate secure keys with: openssl rand -hex 32

# ===========================================
# Facebook Credentials (Required)
# ===========================================
FB_EMAIL=your_facebook_email@example.com
FB_PASSWORD=your_facebook_password

# ===========================================
# OpenAI Configuration (Required)
# ===========================================
# Get your API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_CLASSIFIER_MODEL=gpt-4o-mini
OPENAI_GENERATOR_MODEL=gpt-4o-mini
CLASSIFIER_BATCH_SIZE=10
GENERATOR_BATCH_SIZE=10

# ===========================================
# Database Configuration (Required)
# ===========================================
# Local: postgresql://username:password@localhost:5432/tarasa_db
# Cloud: Use connection string from Supabase/Neon/Railway
POSTGRES_URL=postgresql://username:password@localhost:5432/tarasa_db
DATABASE_URL=postgresql://username:password@localhost:5432/tarasa_db

# ===========================================
# Application Settings
# ===========================================
PORT=4000
NODE_ENV=development
BASE_TARASA_URL=https://tarasa.me/he/premium/your-page-id
GROUP_IDS=123456789,987654321
MAX_MESSAGES_PER_DAY=20

# Landing Page URL (Optional)
# Set this to use the clipboard-based landing page instead of direct tarasa.me links
# The landing page shows post text with a copy button before redirecting to tarasa.me
# Example: https://your-dashboard-domain.com (the /submit/:postId path is added automatically)
SUBMIT_PAGE_BASE_URL=

# Browser settings
HEADLESS=true
MAX_BROWSER_INSTANCES=2

# ===========================================
# Apify Configuration (Recommended)
# ===========================================
# Get your token from: https://console.apify.com/account/integrations
# Required for scraping public Facebook groups without login
APIFY_TOKEN=apify_api_your_token_here
APIFY_RESULTS_LIMIT=20

# ===========================================
# Redis Configuration (Optional but recommended)
# ===========================================
# Used for: caching, rate limiting, job queues, distributed locks
# Local: redis://:password@localhost:6379
# Cloud: Use connection string from Redis Cloud/Upstash
REDIS_URL=redis://:tarasa_redis_s3cret@localhost:6379
REDIS_PASSWORD=tarasa_redis_s3cret

# ===========================================
# Security (Required for Production)
# ===========================================
# API Key for protected endpoints
# Generate with: openssl rand -hex 32
API_KEY=your-secure-api-key-here

# CORS allowed origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# Rate limiting
TRIGGER_RATE_LIMIT_PER_MINUTE=30

# ===========================================
# Monitoring & Error Tracking (Optional)
# ===========================================
# Sentry DSN for error tracking
# Get from: https://sentry.io
SENTRY_DSN=

# ===========================================
# Email Alerts (Optional)
# ===========================================
# For 2FA/Captcha notifications
# Use Gmail App Password: https://support.google.com/accounts/answer/185833
SYSTEM_EMAIL_ALERT=
SYSTEM_EMAIL_PASSWORD=

# ===========================================
# Telegram Bot Integration (Optional)
# ===========================================
# For remote monitoring and high-quality story notifications
# Create a bot: https://t.me/BotFather (send /newbot)
# Get chat ID: https://t.me/userinfobot or send message to bot and check API
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# ===========================================
# Weekly Reports - SMTP Configuration (Optional)
# ===========================================
# For automated weekly email reports
# Gmail: smtp.gmail.com:587 with App Password
# Outlook: smtp.office365.com:587
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
SMTP_FROM=
REPORT_RECIPIENTS=admin@example.com,team@example.com

# ===========================================
# Cron Schedules (Optional - defaults shown)
# ===========================================
# SCRAPE_CRON_SCHEDULE=*/10 * * * *
# CLASSIFY_CRON_SCHEDULE=*/3 * * * *
# MESSAGE_CRON_SCHEDULE=*/5 * * * *
# LOG_CLEANUP_CRON_SCHEDULE=0 3 * * *

# ===========================================
# Log Retention (Optional)
# ===========================================
# Number of days to keep system logs before auto-purge (default: 30)
# LOG_RETENTION_DAYS=30
